{% extends 'travelagency/travelagency_basetemplate.html' %}
{% load static %}

{% block travelagency_stylesheets %}
<!-- Put your css link or inline css here -->
<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"> -->

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css">
<style type="text/css">
	* {
		list-style: none;
	}

	body {
		background: rgb(186, 224, 245);
		background: linear-gradient(90deg, rgba(186, 224, 245, 1) 21%, rgba(221, 221, 237, 1) 57%, rgba(143, 228, 245, 1) 100%);
	}

	.main {
		height: auto;
		padding: 0;
		margin: 20px;
		left: 0;
		display: flex;
		justify-content: space-between;
		width: 100%;
	}

	.main::before {
		position: absolute;
		width: 60%;
		height: 100%;
		transform: skew(25deg);
		background-color: #343a40;
	}

	.content {
		width: calc(100%);
	}

	.Dashboard {
		width: 100%;
		display: flex;
		justify-content: center;
		font-family: fantasy;
		font-size: 45px;
		/* margin-left: 30px; */
		letter-spacing: 2px;
	}

	.title,
	.Thumbnail {
		display: flex;
		align-items: center;
		justify-content: space-between;
		/* width: 100%; */
		margin: 0px 10px 0 30px;
	}

	.Thumbnail label {
		font-size: 25px;
		width: 200px;
		font-weight: bold;
	}

	.info {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
		grid-column-gap: 55px;
		/*grid-row-gap: 20px;*/
		margin-right: 30px;
	}

	.cd {
		color: white;
		width: 400px;
		background: rgb(56, 46, 136);
		background: linear-gradient(90deg, rgba(56, 46, 136, 1) 13%, rgba(51, 34, 153, 1) 49%, rgba(88, 80, 188, 1) 82%, rgba(95, 112, 206, 1) 100%);
		margin: 30px 30px 30px 30px;
		padding: 30px;
		border-radius: 30px;
	}

	.cd label {
		font-size: 20px;
		font-weight: bold;
	}

	.form-control {
		text-align: center;
		cursor: pointer;
		resize: none;
	}

	.info2 {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
		grid-column-gap: 10px;
	}

	.col-md-6 label {
		font-size: 28px;
		color: white;
		font-weight: bold;
	}

	.col-md-6 {
		background: rgb(56, 46, 136);
		background: linear-gradient(90deg, rgba(56, 46, 136, 1) 13%, rgba(51, 34, 153, 1) 49%, rgba(88, 80, 188, 1) 82%, rgba(95, 112, 206, 1) 100%);
		/* background: rgb(68, 62, 116);
		background: linear-gradient(90deg, rgba(68, 62, 116, 1) 13%, rgba(108, 117, 205, 1) 49%, rgba(121, 160, 240, 1) 82%, rgba(121, 162, 245, 1) 100%); */
		color: white;
		border-radius: 5px;
		padding: 30px;
		margin: 15px 45px 15px 30px;
		max-width: 95% !important;
	}

	#cards {
		padding: 20px 50px 50px 30px;
		display: flex;
		align-items: center;
		justify-content: center;
		flex-flow: column;
	}

	.cardslabel {
		font-size: 40px;
		font-weight: bolder;
		/*color: white;*/
		margin-left: 30px;
	}

	.card {
		width: 100%;
		/*padding-top: 20px;*/
		margin: 10px 10px 10px 0px;
		color: white;
		background-color: rgb(56, 46, 136);
		;
	}

	.card-body {
		background: rgb(56, 46, 136);
		background: linear-gradient(90deg, rgba(56, 46, 136, 1) 13%, rgba(51, 34, 153, 1) 49%, rgba(88, 80, 188, 1) 82%, rgba(95, 112, 206, 1) 100%);
	}

	.card-body .title {
		width: 100% !important;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.card-body .title .form-group {
		width: 100%;
	}

	.submitbtn {
		width: 100%;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.submitbtn button {
		width: 180px;
		height: 50px;
		border-radius: 5px;
		background-color: #1d1d1d;
		color: white;
		font-weight: bold;
		border-color: #1d1d1d;
	}

	.card-body .title {
		margin: 0 !important;
		padding: 0 !important;
	}

	@media screen and (max-width: 850px) {
		#cards {
			width: 100%;
			display: flex;
			padding: 0;
		}

		.card {
			margin-left: 10px;
		}

		.col-md-6 label {
			font-size: 24px;
			color: white;
			font-weight: bold;
		}

		.card-body .title {
			padding: 0 0 0 0;
		}

		.card-body .title .form-group {
			width: 100%;
		}

		.Dashboard,
		.title,
		.Thumbnail {
			margin-left: 0 !important;
			width: 80%;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.info {
			margin-right: 0 !important;
		}

		.content {
			width: 100%;
			padding: 30px;
			display: flex;
			align-items: center;
			justify-content: center;
			flex-flow: column;
			margin-left: 0;
		}

		.nav-link {
			padding: .5rem 0.5rem;
		}
	}

	@media screen and (min-width: 850px) {
		.title {
			margin-top: 30px;
		}
	}

	@media screen and (max-width: 630px) {
		.main {
			width: 100%;
			margin: 0 0 0 -30px;
		}

		.content {
			width: 100%;
			padding: 10px;
			display: flex;
			align-items: center;
			justify-content: center;
			flex-flow: column;
			margin-left: 0;
			left: 0;
		}

		.info2 {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
			grid-column-gap: 3px;
			margin-left: 0;
		}

		.info {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
			grid-column-gap: 0px;
			margin-left: 0 !important;
		}

		.cardslabel {
			font-size: 30px;
			margin-left: 0;
		}

		#cards {
			padding: 13px;
		}

		.cd,
		.col-md-6 {
			width: 300px;
			margin: 10px 0 10px 0 !important;
		}

		.Thumbnail {
			display: flex;
			align-items: center;
			justify-content: center;
		}
	}


	.setdatebtn {
		background-color: #1d1d1d;
		padding: 10px;
		border-radius: 5px;
		color: #fff;
		border-color: #1d1d1d;
	}

	#errormsgbg {
		width: 100%;
		display: flex;
		justify-content: center;
		align-items: center;
	}

	#cards .card,
	#cards .card-header {
		margin-top: 0 !important;
	}

	.cursor-none {
		pointer-events: none;
	}

	.footer-middle {
		z-index: 5;
	}

	.spimg {
		position: absolute;
		top: 0;
		left: 0;
		opacity: 0;
		width: 120px;
		height: 120px;
		display: none;
	}

	.spimgs {
		position: relative;
		width: 125px;
		display: flex;
		align-items: center;
		flex-flow: column;
		justify-content: space-around;
	}

	.sp1img {
		top: 0;
		left: 0;
		width: 120px;
		height: 120px;
		display: none;
	}

	.sp1img img {
		position: absolute;
		left: 0;
		top: 0;
		width: 120px;
		height: 120px;
		border-radius: 4px;
	}

	.spimgs p {
		margin: 0 0 0 0;
	}

	.spimgs .spimgnum p {
		margin: 0;
	}

	.cdimages {
		display: flex;
		justify-content: space-around;
	}

	.cdimages button {
		margin-top: 10px;
		background-color: #1d1d1d;
		border-radius: 4px;
		width: auto;
		padding: 5px 10px;
		outline: none !important;
		font-size: 14px;
		border: none;
		color: #fff;
		display: none;
		align-items: center;
		justify-content: center;
	}

	.upload_img1_L {
		width: 120px;
		height: 120px;
		padding: 5px;
		text-align: center;
		display: none;
		align-items: center;
		justify-content: center;
		border: 5px dashed black;
	}

	.showImagesBtn {
		display: none;
		margin: 10px 10px 0 10px;
		text-align: center;
		font-size: 18px;
		cursor: pointer;
	}

	.allUploadedImages {
		display: flex;
		justify-content: space-around;
		align-items: center;
		flex-wrap: wrap;
	}

	.uploadedImage {
		width: 120px;
		border-radius: 4px;
		margin: 5px;
		display: none;
	}

	.modal-footer {
		font-weight: bold;
	}

	.uploadedThumbnail {
		display: none;
		cursor: pointer;
	}

	#exampleModalCenter1 .modal-title {
		color: #343a40;
	}

	#exampleModalCenter1 .modal-body {
		display: flex;
		justify-content: center;
		align-items: center;
	}

	#exampleModalCenter1 .modal-body img {
		max-width: 145px;
		max-height: 145px;
		border-radius: 4px;
	}

	input[type='file'] {
		overflow: hidden;
	}
</style>

{% endblock travelagency_stylesheets %}

{% block travelagency_body %}

<!--Put normal html here -->
<div class="main">
	<form class="content" method="POST"
		action='/travelagency/myagency/addtour/{{request.user.id}}/{{request.user.userAccess.agentId}}'
		enctype="multipart/form-data" onsubmit="return validator();">

		{% csrf_token %}
		{% if messages %}
		{% for message in messages %}
		<div class="col-md-12">
			<div class="alert alert-{{message.tags}}" role="alert">
				{{message}}
				<button type="button" class="close" data-dismiss="alert" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
		</div>
		{% endfor %}
		{% endif %}
		<span class="Dashboard">DASHBOARD</span>
		<span class="title">
			<!-- <label>Title : </label> -->
			<input type="text" name="ttitle" class="form-control" placeholder="Title *" minlength="10" maxlength="300"
				style="height: 50px;left: 0;width: 100%;" required>
		</span>
		<div class="info">
			<div class="cd">
				<!-- <div class="block"><img src="{% static 'travelagency_img/calendar.png' %}"></div> -->
				<label>Enter Date :</label>
				<li>Startind Date<input id="txtF" name="sdate" class="form-control text-center" placeholder="dd/mm/yyyy"
						required onchange="fun();">
				</li>
				<br>
				<li>Ending Date<input id="txtT" name="edate" class="form-control text-center cursor-none"
						placeholder="(Please Select Start Date First)" onchange="fun();">
				</li>
				<!-- <br>
				<li style="display:flex;justify-content: center;"><button class="setdatebtn" type="button" 
					onclick="fun();">Confirm Date</button>
				</li> -->
			</div>
			<div class="cd">
				<label>Date Limitation :</label>
				<li>The Tour has to be booked before : <input name="bookinglimit" id="bookinglimit"
						class="form-control text-center cursor-none" placeholder="(Confirm The Tour Start Date First)">
				</li><br>
				<li>Number of Seats *<input type="number" min="1" id="seat"
						placeholder="Total Number of Seats Available" class="form-control" name="seat" required>
				</li>
			</div>
			<div class="cd">
				<label>Enter Location :</label>
				<li>
					Starting Point * <br>
					<input type="text" class="form-control" name="slocation" placeholder="Starting Location *" value=""
						required />
				</li>
				<br>
				<li>
					Ending Point *
					<br>
					<input type="text" class="form-control" name="elocation" placeholder="Ending Location *" value=""
						required />
				</li>
			</div>
			<div class="cd">
				<label>Enter Price : </label><br>
				<li class="">
					Enter Price *
					<input type="number" class="form-control" name="price" placeholder="Price per People *" value=""
						min="150" required />
				</li>
				<br>
				<li class="">
					Any Additional Feature *
					<select name="additionalFeature" id="additionalFeature" class="form-control" required>
						<option class="hidden" value="" disabled="" selected="" style="text-align: center;">Select
							Additional Feature *</option>
						<option value="Bike-tours">Bike Tours</option>
						<option value="Self-drive car-tours">Self Drive Car Tours</option>
						<option value="Trecking-Special">Trecking Special</option>
						<option value="none">None</option>
					</select>
				</li>
			</div>
			<div class="cd">
				<label>Other Information :</label><br>
				<li class="">
					Enter Type of the Tour *
					<select id="tourtype" class="form-control" required name="ttype">
						<option class="hidden" value="" disabled="" selected="" style="text-align: center;">Select Tour
							Type *</option>
						<option value="Family-Special">Family Special</option>
						<option value="Friends-Special">Friends Special</option>
						<option value="Couple-Friendly">Couple Friendly</option>
						<option value="Solo-Tour">Solo Tour</option>
						<option value="All">Applicable for All</option>
					</select>
				</li>
				<br>
				<li class="">
					Upload Your Thumbnail *

					<div class="uploadedThumbnail" data-toggle="modal" data-target="#exampleModalCenter1">
						Uploaded Thumbnail
					</div>
					<input type="file" accept='image/*' name="thumbnail" id="upload_img" class="form-control upload"
						required />

					<div class="modal fade" id="exampleModalCenter1" tabindex="-1" role="dialog"
						aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
						<div class="modal-dialog modal-dialog-centered" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="exampleModalLongTitle">Uploaded Images</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									<img src="#" alt="Thrumneil">
								</div>
							</div>
						</div>
					</div>
				</li>
			</div>
			<div class="cd">
				<label>Special Offer :</label><br>
				<li class="">
					Do You Have Any Special Offer ?<br>
					<select name="spoffer" id="spoffer" class="form-control" required onchange="setsp();">
						<option class="hidden" id="tourtype" value="" disabled="" selected=""
							style="text-align: center;">Select Special Offer *</option>
						<option value="True">Yes</option>
						<option value="False">No</option>
					</select>

				</li>
				<br>
				<li id="spod">
					Write Your Special Offer *
					<textarea placeholder="Your Special Offer" name="spofferdetails" id="spofferdetails"
						class="form-control"></textarea>

				</li>
			</div>
			<div class="cd">
				<label>Upload Tour Images (one by one):</label><br>
				<div class="cdimages pt-3">
					<div class="spimgs">
						<label for="upload_img1" class="upload_img1_L upload_img1_L1" id="label_img1">
							Drag a image/ Click
						</label>
						<input type="file" accept='image/*' name="image1" id="upload_img1" class="form-control spimg"
							required />

						<label for="upload_img2" class="upload_img1_L upload_img2_L2" id="label_img2">
							Drag a image/ Click
						</label>
						<input type="file" accept='image/*' name="image2" id="upload_img2" class="form-control spimg" />

						<label for="upload_img3" class="upload_img1_L upload_img3_L3" id="label_img3">
							Drag a image/ Click
						</label>
						<input type="file" accept='image/*' name="image3" id="upload_img3" class="form-control spimg" />

						<label for="upload_img4" class="upload_img1_L upload_img4_L4" id="label_img4">
							Drag a image/ Click
						</label>
						<input type="file" accept='image/*' name="image4" id="upload_img4" class="form-control spimg" />

						<label for="upload_img5" class="upload_img1_L upload_img5_L5" id="label_img5">
							Drag a image/ Click
						</label>
						<input type="file" accept='image/*' name="image5" id="upload_img5" class="form-control spimg" />

						<label for="upload_img6" class="upload_img1_L upload_img6_L6" id="label_img6">
							Drag a image/ Click
						</label>
						<input type="file" accept='image/*' name="image6" id="upload_img6" class="form-control spimg" />

						<button type="button" onclick="anotherSpimg();">Add Another Image</button>
					</div>
					<div class="spimgs">
						<div class="sp1img">
							<img src="#" alt="Tour Images" id="blah" />
						</div>
						<p>
							<span class="spimgnum">0 image has been uploaded</span>
						</p>
					</div>
				</div>
				<div class="showImagesBtn" data-toggle="modal" data-target="#exampleModalCenter">
					Click Here To See Uploaded images
				</div>
			</div>
			<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
				aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
				<div class="modal-dialog modal-dialog-centered" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="exampleModalLongTitle">Uploaded Images</h5>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body allUploadedImages">
							<img src="#" alt="Image 1" class="uploadedImage">
							<img src="#" alt="Image 1" class="uploadedImage">
							<img src="#" alt="Image 1" class="uploadedImage">
							<img src="#" alt="Image 1" class="uploadedImage">
							<img src="#" alt="Image 1" class="uploadedImage">
							<img src="#" alt="Image 1" class="uploadedImage">
						</div>
						<div class="modal-footer">
							You Can Edit Images After Creating Your Tour <br>
							You Can Change The Last Image By Uploading Again
						</div>
					</div>
				</div>
			</div>
		</div>
		<br>
		<div class="info2">
			<!-- <div class="cd1"> -->
			<div class="col-md-6">
				<label>Tour Inclusive :</label>
				<div class="form-group">
					<textarea class="form-control" minlength="20" name="inclusive" placeholder="Describe Tour Inclusive"
						rows="5" id="comment" required></textarea>
				</div>
			</div>

			<div class="col-md-6">
				<label>Tour Exclusive :</label>
				<div class="form-group">
					<textarea class="form-control" name="exclusive" minlength="10" placeholder="Describe Tour Exclusive"
						rows="5" id="comment" required></textarea>
				</div>
			</div>
			<!-- </div> -->
			<!-- <div class="cd1"> -->
			<div class="col-md-6">
				<label>Special Highlights :</label>
				<div class="form-group">
					<textarea class="form-control" name="highlight" minlength="20"
						placeholder="Describe Tour Highlights" rows="5" id="comment" required></textarea>
				</div>
			</div>
			<div class="col-md-6">
				<label>Overview :</label>
				<div class="form-group">
					<textarea class="form-control" name="overview" minlength="20" placeholder="Describe the Tour"
						rows="5" id="comment" required></textarea>
				</div>
			</div>
			<!-- </div> -->
		</div>
		<span class="cardslabel">Journey Dairy :</span>
		<div id="cards">
		</div>
		<div id="errormsgbg">
			<div id="errormsg" onclick="removeValidator();">
			</div>
		</div>
		<span class="submitbtn"><button type="sbumit">Submit</button></span>

	</form>
</div>
<!--Normal html ends here-->
<!--Put your js here -->
<script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
	crossorigin="anonymous">
	</script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"
	integrity="sha256-T0Vest3yCU7pafRw9r+settMBX6JkKN06dqBnpQ8d30=" crossorigin="anonymous"></script>

<script type="text/javascript">
	var globalVar1 = 1;
	$(function () {
		var mindate = new Date();
		var tomorrowReal = new Date(mindate.getTime() + (7 * 24 * 60 * 60 * 1000));
		$('#txtF').datepicker({
			numberOfMonths: 1,
			showAnim: 'drop',
			minDate: tomorrowReal,
			dateFormat: 'dd/mm/yy',
			onSelect: function (sd) {
				var d1 = sd.substr(0, 2);
				var d2 = sd.substr(3, 2);
				var d3 = sd.substr(6, 4);
				sd = d2 + '/' + d1 + '/' + d3;
				var k = new Date(sd);

				console.log(k, k.getTime());
				var tomorrow = new Date(k.getTime() + (24 * 60 * 60 * 1000));
				var yesterday = new Date(k.getTime() - (3 * 24 * 60 * 60 * 1000));
				$('#txtT').datepicker("option", "minDate", tomorrow);
				$('#txtT').attr('required', 'required');
				$('#txtT').attr('placeholder', 'dd/mm/yyyy');
				$('#txtT').removeClass('cursor-none');
				$('#bookinglimit').datepicker("option", "maxDate", yesterday);
				$('#bookinglimit').removeClass('cursor-none');
				$('#bookinglimit').attr('placeholder', 'dd/mm/yyyy');
				$('#bookinglimit').attr('required', 'required');
				fun();
			}
		});
		$('#txtT').datepicker({
			showAnim: 'drop',
			numberOfMonths: 1,
			dateFormat: 'dd/mm/yy',
			onSelect: function (sd) {
				var d1 = sd.substr(0, 2);
				var d2 = sd.substr(3, 2);
				var d3 = sd.substr(6, 4);
				var selectdate = d2 + '/' + d1 + '/' + d3;
				console.log(selectdate);
				selectdate = new Date(selectdate);
				selectdate = new Date(selectdate.getTime() - (24 * 60 * 60 * 1000));
				$('#txtF').datepicker("option", "maxDate", selectdate);
				fun();
			}
		});
		var bookingMinDate = new Date(mindate.getTime() + (24 * 60 * 60 * 1000));
		$('#bookinglimit').datepicker({
			minDate: bookingMinDate,
			showAnim: 'drop',
			numberOfMonths: 1,
			dateFormat: 'dd/mm/yy'
		});
	});

	function fun() {
		let allCard = document.querySelectorAll('.card');
		var sd = document.getElementById('txtF').value;
		var d1 = sd.substr(0, 2);
		var d2 = sd.substr(3, 2);
		var d3 = sd.substr(6, 4);
		sd = d2 + '/' + d1 + '/' + d3;
		sd = new Date(sd);
		var ed = document.getElementById('txtT').value;
		var d1 = ed.substr(0, 2);
		var d2 = ed.substr(3, 2);
		var d3 = ed.substr(6, 4);
		ed = d2 + '/' + d1 + '/' + d3;
		ed = new Date(ed);
		var d = ed.getTime() - sd.getTime();
		var x = d / (1000 * 3600 * 24) + 1;
		allCardLn = allCard.length;
		if (x > allCardLn) {
			addCard(allCardLn, x);
		}
		else if (x < allCardLn) {
			removeCard(allCardLn, x);
		}
	}

	function addCard(a, b) {
		for (let i = a; i < b; i++) {
			var content = document.createElement("div");
			content.classList.add('card');
			var cardHead = document.createElement('div');
			cardHead.classList.add('card-header');
			var h3 = document.createElement('h3');
			var nodeHead = document.createTextNode('Day ' + (i + 1));
			var y = 'Day' + (i + 1);
			content.classList.add(y);
			h3.appendChild(nodeHead);
			cardHead.appendChild(h3);

			var cardBody = document.createElement('div');
			cardBody.classList.add('card-body');

			var cardBody1 = document.createElement('div');
			cardBody1.classList.add('col-md-12');
			cardBody1.classList.add('title');

			var cardBody1Content = document.createElement('div');
			cardBody1Content.classList.add('form-group');

			var cardBody1ContentInput = document.createElement('input');
			// cardBody1ContentInput.prop("required", true);
			cardBody1ContentInput.required = 'required';
			cardBody1ContentInput.type = 'text';
			cardBody1ContentInput.classList.add('form-control');
			cardBody1ContentInput.placeholder = 'Title ' + (i + 1);
			cardBody1ContentInput.name = 'dayTitle' + (i + 1);
			cardBody1ContentInput.maxLength = '100';

			cardBody1Content.appendChild(cardBody1ContentInput);

			// cardBody1.appendChild(cardBody1l);
			cardBody1.appendChild(cardBody1Content);

			var cardBodyl = document.createElement('label');
			var cardBodyln = document.createTextNode('Descriptions :');

			cardBodyl.appendChild(cardBodyln);


			var cardBody2 = document.createElement('div');
			cardBody2.classList.add('form-group');

			var cardBodyTextarea = document.createElement('textarea');
			// cardBodyTextarea.prop("required", true);
			cardBodyTextarea.required = 'required';
			cardBodyTextarea.minLength = "20";
			cardBodyTextarea.classList.add('form-control');
			cardBodyTextarea.placeholder = 'Describe Your Day ' + (i + 1);
			cardBodyTextarea.id = 'comment';
			cardBodyTextarea.rows = "4";
			cardBodyTextarea.name = 'dayDescription' + (i + 1);

			cardBody2.appendChild(cardBodyTextarea);

			cardBody.appendChild(cardBody1);
			cardBody.appendChild(cardBody2);

			content.appendChild(cardHead);
			content.appendChild(cardBody);

			var cards = document.getElementById('cards');
			cards.appendChild(content);
		}

	}

	function removeCard(allCardLn, x) {
		let allCard = document.querySelectorAll('.card');
		for (let i = allCardLn - 1; i >= x; i--) {
			allCard[i].remove();
		}
	}

	$(function () {
		var dropzone = document.getElementById('upload_img');
		$('#upload_img').on({
			'dragover': function () {
				dropzone.style.backgroundColor = 'red';
			},
			'change': function () {
				dropzone.style.backgroundColor = 'white';
				$('.uploadedThumbnail').addClass('d-flex');
				readThumbnail(this);
			}
		})
			.on('dragleave dragexit', function () {
				dropzoneImg1.style.backgroundColor = 'white';
			});

		var dropzoneImg1 = document.querySelector('.upload_img1_L1');
		var spbtn = document.querySelector('.spimgs button');
		var showImagesBtn = document.querySelector('.showImagesBtn');
		$('#upload_img1').on({
			'dragover': function () {
				dropzoneImg1.style.borderColor = 'red';
			},
			'change': function () {
				dropzoneImg1.style.borderColor = 'green';
				document.querySelector('.spimgnum').innerHTML = '1 image has been uploaded';
				spbtn.style.display = 'flex';
				showImagesBtn.style.display = 'flex';
			}
		})
			.on('dragleave dragexit', function () {
				dropzoneImg1.style.borderColor = 'black';
			});
		var dropzoneImg2 = document.querySelector('.upload_img2_L2');
		$('#upload_img2').on({
			'dragover': function () {
				dropzoneImg2.style.borderColor = 'red';
			},
			'change': function () {
				dropzoneImg2.style.borderColor = 'green';
				document.querySelector('.spimgnum').innerHTML = '2 images have been uploaded';
			}
		})
			.on('dragleave dragexit', function () {
				dropzoneImg2.style.borderColor = 'black';
			});
		var dropzoneImg3 = document.querySelector('.upload_img3_L3');
		$('#upload_img3').on({
			'dragover': function () {
				dropzoneImg3.style.borderColor = 'red';
			},
			'change': function () {
				dropzoneImg3.style.borderColor = 'green';
				document.querySelector('.spimgnum').innerHTML = '3 images have been uploaded';
			}
		})
			.on('dragleave dragexit', function () {
				dropzoneImg3.style.borderColor = 'black';
			});
		var dropzoneImg4 = document.querySelector('.upload_img4_L4');
		$('#upload_img4').on({
			'dragover': function () {
				dropzoneImg4.style.borderColor = 'red';
			},
			'change': function () {
				dropzoneImg4.style.borderColor = 'green';
				document.querySelector('.spimgnum').innerHTML = '4 images have been uploaded';
			}
		})
			.on('dragleave dragexit', function () {
				dropzoneImg4.style.borderColor = 'black';
			});
		var dropzoneImg5 = document.querySelector('.upload_img5_L5');
		$('#upload_img5').on({
			'dragover': function () {
				dropzoneImg5.style.borderColor = 'red';
			},
			'change': function () {
				dropzoneImg5.style.borderColor = 'green';
				document.querySelector('.spimgnum').innerHTML = '5 images have been uploaded';
			}
		})
			.on('dragleave dragexit', function () {
				dropzoneImg5.style.borderColor = 'black';
			});
		var dropzoneImg6 = document.querySelector('.upload_img6_L6');
		$('#upload_img6').on({
			'dragover': function () {
				dropzoneImg6.style.borderColor = 'red';
			},
			'change': function () {
				dropzoneImg6.style.borderColor = 'green';
				document.querySelector('.spimgnum').innerHTML = '6 (MAX) images have been uploaded';
				spbtn.style.display = 'none';
			}
		})
			.on('dragleave dragexit', function () {
				dropzoneImg6.style.borderColor = 'black';
			});
		var upload_img1 = document.querySelector('#upload_img1');
		upload_img1.style.display = 'block';
		dropzoneImg1.style.display = 'block';
	});

	document.querySelectorAll('.uploadedImage').forEach(function (el) {
		if (el.getAttribute('src') == '#') {
			console.log('#');
			el.classList.remove('d-flex');
		}
		else {
			console.log(el.getAttribute('src'))
			el.classList.add('d-flex');
		}
	});

	document.querySelectorAll('.spimg').forEach(function (el) {
		el.addEventListener('change', function () {
			readURL(this);
		});
	})
	function readURL(input) {
		if (input.files && input.files[0]) {
			// let x=parseInt(document.querySelector('.spimgnum').innerHTML[0])+1;
			var uploadedImage = '.allUploadedImages img:nth-child(' + globalVar1 + ')';
			var allUploadedImages = document.querySelector(uploadedImage);
			allUploadedImages.classList.add('d-flex');
			// console.log(uploadedImage,allUploadedImages);
			var reader = new FileReader();
			reader.onload = function (e) {
				$('#blah').attr('src', e.target.result);
				allUploadedImages.setAttribute('src', e.target.result);
				$('.sp1img').addClass('d-flex');
			}
			reader.readAsDataURL(input.files[0]);
		}
	}

	function readThumbnail(input) {
		if (input.files && input.files[0]) {
			var reader = new FileReader();
			reader.onload = function (e) {
				$('#exampleModalCenter1 .modal-body img').attr('src', e.target.result);
			}
			reader.readAsDataURL(input.files[0]);
		}
	}

	function anotherSpimg() {
		globalVar1 += 1;
		var num = document.querySelector('.spimgnum').innerHTML;
		// console.log(num,num[0]);
		num = num[0];
		var num1 = parseInt(num) + 1;
		var label = 'label_img' + num;
		var nextlabel = 'label_img' + num1;
		var imgfile = 'upload_img' + num;
		var nextimgfile = 'upload_img' + num1;
		var x = document.getElementById(imgfile);
		var y = document.getElementById(nextimgfile);
		var a = document.getElementById(label);
		var b = document.getElementById(nextlabel);
		x.style.display = 'none';
		y.style.display = 'flex';
		y.value = null;
		a.style.display = 'none';
		b.style.display = 'flex';
		$('.sp1img').removeClass('d-flex');
	}

	$(function () {
		let spo = document.getElementById('spod');
		spo.style.visibility = 'hidden';
	})
	function setsp() {
		let spo = document.getElementById('spoffer');
		let spod = document.getElementById('spod');
		let spofferdetails = document.getElementById('spofferdetails');
		if (spo.value !== 'True') {
			spod.style.visibility = 'hidden';
			$('#spofferdetails').removeAttr('required');
		}
		else {
			spod.style.visibility = 'visible';
			$('#spofferdetails').attr('required', 'required');
		}
	}

	function validator() {
		let msg = [];
		let ayan = document.querySelectorAll('.card');
		if (ayan.length < 1) {
			msg.push('Please Confrim Date. \n In Case of Dificulty Contact Us.');
		}
		// msg.push('hello');
		if (msg.length > 0) {
			errormsg.innerHTML = msg.join('\n');
			// errormsgbg.style.width="500px";
			errormsg.style.padding = "8px";
			errormsgbg.style.borderRadius = "5px";
			errormsgbg.style.backgroundColor = '#FBD0F5';
			errormsg.style.color = 'red';
			errormsgbg.style.margin = '10px';
			// errormsg.style.fontWeight="bold";
			return false;
		}

		var inclusive = $('textarea[name=inclusive]').val();
		inclusive = inclusive.replace(/(\r\n|\n|\r)/gm, "\n");
		$('textarea[name=inclusive]').val(inclusive);

		var exclusive = $('textarea[name=exclusive]').val();
		exclusive = exclusive.replace(/(\r\n|\n|\r)/gm, "\n");
		$('textarea[name=exclusive]').val(exclusive);

		var highlight = $('textarea[name=highlight]').val();
		highlight = highlight.replace(/(\r\n|\n|\r)/gm, "\n");
		$('textarea[name=highlight]').val(highlight);

		var overview = $('textarea[name=overview]').val();
		overview = overview.replace(/(\r\n|\n|\r)/gm, "\n");
		$('textarea[name=overview]').val(overview);
		for (let i = 1; i < ayan.length + 1; i++) {
			var name = 'dayDescription' + i;
			var XXX = 'textarea[name=' + name + ']';
			var m = $(XXX).val();
			// console.log(m);
			m = m.replace(/(\r\n|\n|\r)/gm, "\n");
			$(XXX).val(m);
			// console.log($(XXX).val());
		}
		return true;
	}
	function removeValidator() {

		var errormsg = document.getElementById('errormsg');

		var errormsgbg = document.getElementById('errormsgbg');
		errormsg.innerHTML = null;
		errormsg.style.padding = '0px';
		errormsgbg.style.margin = '0px';
	}
	window.onbeforeunload = function (e) {
        e = e || window.event;
        if (e) {
            e.returnValue = '';
        }
        return '';
    };
</script>

<!-- JS ends here-->

{% endblock travelagency_body %}